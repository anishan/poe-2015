<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>LAZER MAZE</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/clean-blog.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300">
    <!-- <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'> -->

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
<!--
    TABS ARE FROM HERE: http://bootsnipp.com/snippets/featured/form-wizard-using-tabs -->

</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <!-- <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html">LAZER MAZE</a>
            </div> -->

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="index.html">PROJECT</a>
                    </li>
                    <li>
                        <a href="blog.html">Blog</a>
                    </li>
                    <li>
                        <a href="about.html">About us</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header class="intro-header" style="background-image: url('img/hero.jpg')">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="site-heading">
                        <h1>Lazer Maze</h1>
<!--                         <hr class="small"> -->
<!--                         <span class="subheading">A Clean Blog Theme by Start Bootstrap</span> -->
                    </div>
                </div>
            </div>
        </div>
    </header>


    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <p> You know those scenes in spy movies where a character breaks into an important building and nimbly navigates a maze of laser beam tripwires?  Well, weâ€™ve mimicked that with a laser maze experience where players attempt to navigate an obstacle course as quickly as possible without breaking the laser beams.</p>

                <p> This is a project for <a href="http://poe.olin.edu/">Principles of Engineering</a>, a mechatronics class at <a href="http://www.olin.edu/">Olin College of Engineering </a> focusing on integrating software, electrical, and mechanical systems. Read about our process in our <a href="blog.html">blog</a>.</p>

                <p> When choosing a project, we took into consideration the learning goals of our team members. Check out our individual interests on our <a href="about.html">team page</a>.</p>
                <p><br></p>
            </div>
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            	<div class="strike">
            		<span>
            			<h2 align="center"> SYSTEM OVERVIEW </h2>
            		</span>
            	</div>
                <p><i>"A system diagram depicting the schematic relationships between all of the different subsystems comprising your final system."</i></p>

                <img class="img-responsive" src="img/systemMain.png" alt="">
                <br>

                <p>Lazer Maze is a large, closed structure, inside which the game experience occurs.  The maze itself is created with four green lasers bounced back and forth via mirrors and retroreflective tape.  The beams are made visible by means of fog.  The box is constructed from a PVC frame and tri-wall cardboard walls, with a black fabric ceiling to block exterior light, and a clear curtain on the opening to prevent the dispersal of the fog.</p>

                <br>
                <img class="img-responsive" src="img/systemDiagram.png" alt="">
                <br>

                <p>The gameplay is initiated by user input on a tablet located at the entrance to the box.  The electronics are housed between the inner and outer cardboard walls.</p>

                <p> Photos / videos</p>



            </div>
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            	<div class="strike2">
            		<span>
            			<h2 align="center" class="no-margin"> SUBSYSTEMS </h2>
            		</span>
            	</div>
				<div class="row">
					<section>
			        <div class="wizard">
			            <div class="wizard-inner">
			                <ul class="nav nav-tabs" role="tablist">
			                    <li role="presentation" class="disabled">
			                        <a href="#mechanical" data-toggle="tab" aria-controls="mechanical" role="tab" title="MECHANICAL">
			                            <span class="round-tab">
			                                <i class="fa fa-wrench"></i>
			                            </span>
			                        </a>
			                    </li>
			                    <li role="presentation" class="disabled">
			                        <a href="#electrical" data-toggle="tab" aria-controls="electrical" role="tab" title="ELECTRICAL">
			                            <span class="round-tab">
			                                <i class="fa fa-bolt"></i>
			                            </span>
			                        </a>
			                    </li>
			                    <li role="presentation" class="disabled">
			                        <a href="#firmware" data-toggle="tab" aria-controls="firmware" role="tab" title="FIRMWARE">
			                            <span class="round-tab">
			                                <i class="fa fa-gear"></i>
			                            </span>
			                        </a>
			                    </li>
			                    <li role="presentation" class="disabled">
			                        <a href="#software" data-toggle="tab" aria-controls="software" role="tab" title="SOFTWARE">
			                            <span class="round-tab">
			                                <i class="fa fa-code"></i>
			                            </span>
			                        </a>
			                    </li>
			                </ul>
			            </div>

			            <form role="form">
			                <div class="tab-content">
			                    <div class="tab-pane" role="tabpanel" id="mechanical">
			                        <h3>MECHANICAL SUBSYSTEM</h3>

			                        <p><i>"A detailed description of your mechanical design (CAD images/renderings are appropriate) and any necessary analysis."</i></p>

                                    <ul>
                                        <li>modularity</li>
                                        <li>dimensions</li>
                                    </ul>

			                        <br>
			                    </div>
			                    <div class="tab-pane" role="tabpanel" id="electrical">
			                        <h3>ELECTRICAL SUBSYSTEM</h3>

                                    <p>The main electrical components are the lasers, the photodiodes to detect breaks in the lasers, and servos. These are all interfaced with an Arduino Uno and Raspberry Pi B+. You can read more about the Arduino and Raspberry Pi code in the firmware section.</p>

                                    <h4>Lasers</h4>

                                    <p>Our gameplay is built around the four green laser modules, which are installed along the wall at regular intervals. Each laser requires 2.5V-4.5V and 300mA, so we wired the four lasers in series to our 12V 5A DC power supply. This supplies each of the lasers with 3V, and more than enough current. The lasers are also wired in series with a mechanical push-button as a safety on/off switch, so that they can be controlled separately from the rest of the electronics. A circuit diagram of just the lasers and pushbutton is below:</p>

                                    <img class="img-responsive" src="img/circuit_diagram_lasers.png" alt="laser hookup">

                                    <h4>Photodiodes and Servos</h4>

                                    <p>In order to detect when the laser beam has been broken, we added photodiodes next to each of the lasers. When the laser beam is not broken, it reflects off a piece of retroreflective tape at the end of the beam, which reflects a small circle of scattered light back around the laser. As a result, the photodiode is also lit. However, the scattered light is blocked when the laser beam is obstructed, so the photodiode is dark. Photodiodes produce a current by absorbing photons, so more light on the photodiodes correlates to a higher current and voltage. We read this voltage through the analog input of the arduino, and used the readings to analyze whether the laser beam had been broken. You can read more about this analysis in the firmware section.</p>

                                    <p>Two of our lasers are mounted on servos to add moving beams to the game. The servos are powered and controlled through the Arduino, and move at a fixed rate over a limited range of angles. Both of these parameters are set in the Arduino code. In order to control difficulty, we can control whether or not the servos move based on a digital signal from the Raspberry Pi. When the Arduino receives a high voltage from the Pi in pin 13, then the Arduino will move the servos.</p>

                                    <p>This part of the circuit diagram shows the connections between the photodiodes, servos, and Arduino.</p>

                                    <img class="img-responsive" src="img/circuit_diagram_servos.png" alt="photodiode, servos, and Arduino hookup">

                                    <h4>Hardware Communication</h4>

                                    <p>We are using both the Arduino and Raspberry Pi as onboard processors, because the Pi is necessary for communication to the web-app, while the Arduino is necessary for analog input readings. Since the main gameplay is controlled through the Pi, we are using hardware connections to communicate between the Arduino and Pi. Since the sensors are an analog input, they must be read through the Arduino. Then, each time the sensors detect that a laser beam has been broken, the Arduino sends a high digital voltage to the Pi. In addition, the Raspberry Pi has a digital output pin to the Arduino to control whether the servos should be moving. The Raspberry Pi is also connected to the reset pin of the Arduino, so that the sensors can be re-calibrated at the beginning of each game. As a dependency of this communication, the ground on the Arduino and Pi must be connected for a common reference point.</p>

                                    <h4>Power</h4>

                                    <p>In order to make the laser maze a stand-alone module, all the power for the electrical components needed to be supplied through a single wall outlet rather than USB inputs. We used a 12V 5A power supply to convert the wall outlet power to DC, which is necessary for all the electric components. The 12V is used directly for the lasers. However, both the Raspberry Pi and the Arduino need 5V through a micro-USB and USB-B cable respectively. We used 5V voltage regulators to step down the 12V to 5V. The voltage regulators have a maximum amperage of 1.5A, so we needed to use two separate voltage regulators in order to have enough current for both the Arduino and Pi. The Arduino draws between 0.5A and 1A, which is comfortably within the current range of these voltage regulators, and allows enough of a margin us to drive the servos off the Arduino. The Raspberry Pi uses closer to 1.2A, so it is drawing current at the upper range of the voltage regulator. We cut two USB cables to connect the output of the voltage regulators to the power connections on the Pi and Arduino.</p>

                                    <h4>Installation</h4>

                                    <p>The full system circuit diagram (from combining all the previous schematics) is below:</p>

                                    <img class="img-responsive" src="img/circuit_diagram_schem.png" alt="circuit diagram">

                                    <p>We are mounting all of the components in between one of the double walls of the laser maze box. Therefore, we combined all the electrical components onto a single proto board that connects the Raspberry Pi, Arduino, lasers, sensors, and servos. A labelled circuit layout is below.</p>

                                    <img class="img-responsive" src="img/circuit_layout_bb.png" alt="labelled layout diagram">

                                    <br>
			                    </div>
			                    <div class="tab-pane" role="tabpanel" id="firmware">
			                        <h3> FIRMWARE SUBSYSTEM </h3>

                                    <p>Our project has firmware running on both the Arduino and Raspberry Pi. The primary function of the Arduino is to read in the analog values of the sensor readings and control the servos. The Raspberry Pi controls the main game play by using python to broadcast a web-app on its server. The Pi also reads in the signals from the Arduino, to update the game state when lasers are broken.</p>

                					<h4>Arduino - Sensor Readings</h4>

                                    <p>Since the Raspberry Pi cannot take in analog inputs, the Arduino analyzes the analog input from the sensors and puts out a simple high/low value depending on whether the laser has been broken. The Arduino continuously reads in sensor values from each of the photodiodes through different analog pins. A laser is considered broken if the voltage reading from the sensor drops below a certain threshold voltage. However, the threshold voltage is dependent on which laser is being measured (because there are irregularities in laser brightness), and also dependent on the environmental light conditions. Therefore, the threshold values are re-calibrated at the beginning of each game based on the readings of each sensor while the lasers are all unbroken. Once the sensor value drops below the calibration value by more than a certain margin (a hard-coded variable), the Arduino register a "break" in the laser.</p>

                                    <p>We also conducted some software filtering on the sensor values to account for irregularities and noise in the readings. The Arduino stores a history of the previous 10 raw sensor values, and then calculates the average of those values. The average is then compared to the calibration value, and which determines whether the laser beam has been broken. </p>

                                    <p>Once the Arduino detects that a laser has been broken, it sends a high voltage signal to the Raspberry Pi through the corresponding digital out pin. The Arduino will send a high signal for at least half a second after the laser is broken, and will continue to put out a high voltage if a laser is broken for an extended period of time. This is because the Pi only samples for a signal at intervals of approximately 0.25 seconds, so the output voltage must be high for long enough for the Pi to detect the break. </p>

                                    <h4>Arduino - Servo Control</h4>

                                    <p>The Arduino also controls the servos, because the Arduino receives enough excess current from the voltage regulator to drive them, while the Raspberry Pi is already using close to its maximum current. The servos sweep through a pre-defined range of positions such that they follow the strip of retroreflective tape on the opposite wall. Because the servos must change position once every loop iteration, the sweeping cannot be done in a for-loop because this would pause all sensor readings for the duration of the sweep. Instead, the servos change position with a global variable that tracks and increments the servo position with each loop iteration. In order to have the servos controlled by the Raspberry Pi, the servos only run a continuous sweep if they receive a high digital input from the Pi.</p>

                					<p> Access our GitHub repo <a href="https://github.com/anishan/poe-2015"> here</a>.</p>
                					<br>
			                    </div>
			                    <div class="tab-pane" role="tabpanel" id="software">
			                        <h3> SOFTWARE SUBSYSTEM </h3>

					                <p><i>"A detailed description of software design with links to complete source code (github or other repository is helpful). Please be sure to include a list of all external software dependencies (eg. OpenCV, Google Voice API, etc.)."</i></p>

					                <p> We used <a href="http://flask.pocoo.org/docs/0.10/">Flask</a> to generate a web app that initiates the gameplay, keeps track of and displays the play time, and stores and displays the best times for completion of the Lazer Maze.</p>

                                    <p>Our time database is constructed using <a href="https://www.sqlite.org/index.html">SQLite3</a>, and the website appearance is creating using HTML, CSS, and JavaScript.</p>

					                <p> Access our GitHub repo <a href="https://github.com/anishan/poe-2015">here</a>.</p>
					                <br>
			                    </div>
			                    <!-- <div class="clearfix"></div> -->
			                </div>
			            </form>
			        </div>
			    </section>
			   </div>
			</div>
			<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            	<div class="strike">
            		<span>
            			<h2 align="center"> MATERIALS </h2>
            		</span>
            	</div>
                <p>Our bill of materials is detailed below. Our team was allotted a budget of $250 for the completion of this project. View a breakdown of our actual expenditure <a href="budget.html">here</a>.</p>
                <table style="width:100%" align="center">
                        <tr>
                            <td><h4></h4></td>
                            <td align="center"><h4>Quantity</h4></td>
                            <td align="right"><h4>Price / unit</h4></td>
                            <td align="right"><h4>Total price</h4></td>
                        </tr>
                        <tr>
                            <td><h5>Electronics / Control</h5></td>
                        </tr>
                        <tr>
                            <td>Photocells</td>
                            <td align="center">4</td>
                            <td align="right">$0.95</td>
                            <td align="right">$3.80</td>
                        </tr>
                        <tr>
                            <td><a href="https://www.sparkfun.com/products/9906">Green Laser Module</a></td>
                            <td align="center">4</td>
                            <td align="right">$14.95</td>
                            <td align="right">$59.80</td>
                        </tr>
                        <tr>
                            <td>Retroreflective Tape</td>
                            <td align="center">5 yds</td>
                            <td align="right">$2.00</td>
                            <td align="right">$10.00</td>
                        </tr>
                        <tr>
                            <td>Compact Mirrors</td>
                            <td align="center">4</td>
                            <td align="right">$0.25</td>
                            <td align="right">$1.00</td>
                        </tr>
                        <tr>
                            <td><a href="http://www.amazon.com/Eliminator-Lighting-Machines-EF-400-Machine/dp/B0006M59M6/ref=sr_1_10?s=musical-instruments&ie=UTF8&qid=1449601840&sr=1-10">Fog Machine</a></td>
                            <td align="center">1</td>
                            <td align="right">$31.69</td>
                            <td align="right">$31.69</td>
                        </tr>
                        <tr>
                            <td><a href="http://www.amazon.com/Chauvet-FJ-Q-Fog-Fluid-Quart/dp/B0002GUE1W/ref=sr_1_6?s=musical-instruments&ie=UTF8&qid=1449601840&sr=1-6">Fog Fluid</a></td>
                            <td align="center">1 qt</td>
                            <td align="right">$7.99</td>
                            <td align="right">$7.99</td>
                        </tr>
                        <tr>
                            <td><a href="https://www.arduino.cc/en/Main/ArduinoBoardUno">Arduino UNO</a></td>
                            <td align="center">1</td>
                            <td align="right">$24.51</td>
                            <td align="right">$24.51</td>
                        </tr>
                        <tr>
                            <td><a href="https://www.raspberrypi.org/products/raspberry-pi-2-model-b/">Raspberry Pi 2 Model B</a></td>
                            <td align="center">1</td>
                            <td align="right">$39.95</td>
                            <td align="right">$39.95</td>
                        </tr>
                        <tr>
                            <td>Protoboard</td>
                            <td align="center">1</td>
                            <td align="right">$4.95</td>
                            <td align="right">$4.95</td>
                        </tr>
                        <tr>
                            <td>Portable Capsule Speaker</td>
                            <td align="center">1</td>
                            <td align="right">$14.95</td>
                            <td align="right">$14.95</td>
                        </tr>
                        <tr>
                            <td><a href="http://www.samsung.com/us/mobile/galaxy-tab/SM-T230NYKAXAR">Android Tablet</a></td>
                            <td align="center">1</td>
                            <td align="right">$149.95</td>
                            <td align="right">$149.95</td>
                        </tr>
                        <tr>
                            <td colspan="4" align="right">TOTAL &nbsp&nbsp $348.59</td>
                        </tr>
                        <tr>
                            <td><h5>Hardware</h5></td>
                        </tr>
                        <tr>
                            <td>Tri-Wall Cardboard (8' x 3.5')</td>
                            <td align="center">10</td>
                            <td align="right">$10.00</td>
                            <td align="right">$100.00</td>
                        </tr>
                        <tr>
                            <td>Black Cloth</td>
                            <td align="center">6 yds</td>
                            <td align="right">$3.70</td>
                            <td align="right">$22.20</td>
                        </tr>
                        <tr>
                            <td>1-1/2" Schedule 40 PVC (10')</td>
                            <td align="center">12</td>
                            <td align="right">$6.00</td>
                            <td align="right">$72.00</td>
                        </tr>
                        <tr>
                            <td>PVC Fittings</td>
                            <td align="center">12</td>
                            <td align="right">$3.16</td>
                            <td align="right">$37.92</td>
                        </tr>
                        <tr>
                            <td>Velcro (1/2")</td>
                            <td align="center">50 ft</td>
                            <td align="right">$14.29</td>
                            <td align="right">$14.29</td>
                        </tr>
                        <tr>
                            <td>Clear Shower Curtain</td>
                            <td align="center">1</td>
                            <td align="right">$7.99</td>
                            <td align="right">$7.99</td>
                        </tr>
                        <tr>
                            <td colspan="4" align="right">TOTAL &nbsp&nbsp $254.40</td>
                        </tr>
                        <tr>
                            <td colspan="4" align="right"><h4>TOTAL &nbsp&nbsp&nbsp $602.99</h4></td>
                        </tr>
                    </table>
            </div>
        </div>
    </div>
<!--     </div> -->

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <ul class="list-inline text-center">
                        <li>
                            <a href="https://github.com/anishan/poe-2015">
                                <i class="fa fa-github fa-2x"></i>
                                <!-- <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span> -->
                            </a>
                        </li>
                    </ul>
                    <p class="copyright text-muted">Copyright &copy; Lazer Maze 2015<br>
                    Design by <a href="http://startbootstrap.com/template-overviews/clean-blog/">Start Bootstrap</a></p>
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="js/clean-blog.min.js"></script>

</body>

</html>
